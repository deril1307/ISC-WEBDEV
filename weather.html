<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Weather in Jakarta</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="src/index.css" />
    <style>
      @keyframes cloudMove {
        0% {
          transform: translateX(-100px);
        }
        100% {
          transform: translateX(100vw);
        }
      }

      @keyframes tempFadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes locationBounce {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.2);
        }
      }

      .animate-cloud {
        animation: cloudMove 15s linear infinite;
      }

      .animate-temp {
        animation: locationBounce 2s ease infinite;
      }

      .animate-location {
        animation: locationBounce 2s ease infinite;
      }
    </style>
  </head>
  <body class="bg-gray-100 min-h-screen">
    <!-- Navigation Bar Section -->
    <nav class="flex items-center justify-between p-3 bg-white shadow-md fixed w-full top-0 left-0 z-50">
      <div class="flex items-center text-xl">
        <a href="index.html#home" class="flex items-center">
          <img src="img/logo.png" alt="Logo" class="h-10 mr-2" />
          <span>Energi</span>
        </a>
      </div>
      <div class="flex md:hidden">
        <button id="hamburger">
          <img class="block" src="https://img.icons8.com/fluent-systems-regular/2x/menu-squared-2.png" width="40" height="40" />
        </button>
      </div>
      <div class="hidden md:flex text-right text-bold">
        <a href="index.html#home" class="block md:inline-block hover:text-yellow-500 px-3 py-3">Home</a>
        <a href="index.html#services" class="block md:inline-block hover:text-yellow-500 px-3 py-3">Services</a>
        <a href="aboutus.html" class="block md:inline-block hover:text-yellow-500 px-3 py-3">About us</a>
        <a href="index.html#gallery" class="block md:inline-block hover:text-yellow-500 px-3 py-3">Gallery</a>
        <a href="index.html#contactUs" class="block md:inline-block hover:text-yellow-500 px-3 py-3">Visit Us</a>
        <a href="weather.html" class="block md:inline-block hover:text-yellow-500 px-3 py-3">Weather</a>
        <a href="index.html" class="block md:inline-block hover:text-yellow-500 px-3 py-3">Login</a>
        <a href="account.html" class="block md:inline-block hover:text-yellow-500 px-3 py-3">account</a>
      </div>
    </nav>

    <!-- Sidebar -->
    <div id="sidebar" class="fixed top-0 right-0 h-full w-64 bg-white shadow-lg transform translate-x-full transition-transform duration-300 z-50">
      <div class="flex justify-end p-4">
        <button id="close-sidebar">
          <img src="https://img.icons8.com/fluent-systems-regular/2x/close-window.png" width="40" height="40" />
        </button>
      </div>
      <div class="flex flex-col space-y-4 text-right font-bold">
        <a href="index.html#home" class="block px-3 py-3 hover:text-yellow-500">Home</a>
        <a href="index.html#services" class="block px-3 py-3 hover:text-yellow-500">Services</a>
        <a href="aboutus.html" class="block px-3 py-3 hover:text-yellow-500">About us</a>
        <a href="index.html#gallery" class="block px-3 py-3 hover:text-yellow-500">Gallery</a>
        <a href="index.html#contactUs" class="block px-3 py-3 hover:text-yellow-500">Visit Us</a>
        <a href="weather.html" class="block px-3 py-3 hover:text-yellow-500">Weather</a>
        <a href="index.html" class="block px-3 py-3 hover:text-yellow-500">Login</a>
        <a href="account.html" class="block px-3 py-3 hover:text-yellow-500">account</a>
        <a href="tel:+123" class="block px-3 py-3 bg-[#c8a876] text-black font-medium rounded-md flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="black" class="w-6 h-6 mr-2">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z"
            />
          </svg>
          Call now
        </a>
      </div>
    </div>

    <!-- Main Content Section -->
    <main class="pt-16 px-4">
      <div class="bg-white p-6 rounded-lg shadow-lg max-w-md mx-auto">
        <h1 class="text-2xl font-bold mb-4 text-center">Weather in Jakarta</h1>
        <div id="weather" class="text-center text-gray-700"></div>
      </div>
    </main>

    <script>
      async function fetchWeather() {
        try {
          const response = await fetch("http://localhost:3000/weather");
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          const data = await response.json();
          displayWeather(data);
        } catch (error) {
          console.error("Error:", error);
        }
      }

      function displayWeather(data) {
        const weatherDiv = document.getElementById("weather");
        const weatherHTML = `
        <div class="relative bg-gray-200 p-4 rounded-lg shadow-md overflow-hidden">
          <img src="https://img.freepik.com/free-vector/sunset-cloud-collection_1409-3815.jpg?t=st=1722271413~exp=1722275013~hmac=1b5f367ae71fca609a4014cf289392d67c2ed5d8e0f3e5b7b61366a8fcb50d92&w=1380" alt="Cloud" class="absolute top-0 left-0 w-32 animate-cloud" />
          <div class="relative z-10">
            <p class="text-lg font-semibold text-gray-900 animate-location">City: ${data.city.name}</p>
            <p class="text-lg font-semibold text-gray-900 animate-temp">Temperature: ${(data.list[0].main.temp - 273.15).toFixed(2)}Â°C</p>
            <p class="text-lg font-semibold text-gray-900 capitalize animate-temp">Weather: ${data.list[0].weather[0].description}</p>
          </div>
        </div>
      `;
        weatherDiv.innerHTML = weatherHTML;
      }

      fetchWeather();

      document.addEventListener("DOMContentLoaded", function () {
        const hamburger = document.getElementById("hamburger");
        const closeSidebar = document.getElementById("close-sidebar");
        const sidebar = document.getElementById("sidebar");
        const navLinks = document.querySelectorAll("#sidebar a");

        hamburger.addEventListener("click", function () {
          sidebar.classList.add("open");
        });

        closeSidebar.addEventListener("click", function () {
          sidebar.classList.remove("open");
        });

        navLinks.forEach((link) => {
          link.addEventListener("click", function () {
            sidebar.classList.remove("open");
          });
        });

        // Close sidebar when clicking outside of it
        document.addEventListener("click", function (event) {
          if (!sidebar.contains(event.target) && !hamburger.contains(event.target)) {
            sidebar.classList.remove("open");
          }
        });

        // Show/hide navbar based on window size
        function toggleNavbar() {
          if (window.innerWidth >= 768) {
            sidebar.classList.remove("open");
          }
        }

        window.addEventListener("resize", toggleNavbar);
        toggleNavbar(); // Initial check
      });

      window.addEventListener("load", () => {
        setTimeout(() => {
          document.getElementById("spinner").style.display = "none";
        }, 500); // 2 seconds delay
      });
    </script>
  </body>
</html>
